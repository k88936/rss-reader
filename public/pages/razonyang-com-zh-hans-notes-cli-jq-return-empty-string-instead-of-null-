<h2 id="背景">背景</h2>
<p>最近利用 <code>jq</code> 写了几个 GitHub Actions，其输出（<code>outputs</code>）只能作为字符串，而 <code>&quot;null&quot;</code> 字符串永远为真，而这种场景下，<code>jq</code> 于无匹配时返回空字符串更方便。</p>
<h2 id="解决方案">解决方案</h2>
<p>可以通过追加 <code>// empty</code> 注释，以返回空字符串，而非 <code>null</code>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="ln"> 1</span><span class="cl">$ <span class="nb">echo</span> <span class="s1">&#39;{&#34;foo&#34;:&#34;bar&#34;}&#39;</span> <span class="p">|</span> jq <span class="s1">&#39;.foo&#39;</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="s2">&#34;bar&#34;</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">$ <span class="nb">echo</span> <span class="s1">&#39;{&#34;foo&#34;:&#34;bar&#34;}&#39;</span> <span class="p">|</span> jq <span class="s1">&#39;.fizz&#39;</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">null
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">$ <span class="nb">echo</span> <span class="s1">&#39;{&#34;foo&#34;:&#34;bar&#34;}&#39;</span> <span class="p">|</span> jq <span class="s1">&#39;.fizz // empty&#39;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">$ <span class="nb">echo</span> <span class="s1">&#39;{&#34;foo&#34;:&#34;bar&#34;}&#39;</span> <span class="p">|</span> jq <span class="s1">&#39;.foo // empty&#39;</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="s2">&#34;bar&#34;</span>
</span></span></code></pre></div>